!function(e){e.fn.weekly_schedule=function(t){var s=e.extend({days:["sun","mon","tue","wed","thu","fri","sat"],hours:"00:00AM-11:00PM",fontFamily:"Montserrat",fontColor:"black",fontWeight:"100",fontSize:"0.8em",hoverColor:"#727bad",selectionColor:"#9aa7ee",headerBackgroundColor:"transparent",triggerMethod:"click-and-drag",onSelected:function(){},onRemoved:function(){},data:null,dataOutput:"json"},t||{}),a=function(e){var t=[],s=[],a=e.toUpperCase().split("-"),r=parseInt(a[0].split(":")[0]),n=parseInt(a[1].split(":")[0]),o=a[0].includes("AM")||a[0].includes("PM"),i=a[0].includes("PM")?r+12:r,d=a[1].includes("PM")?n+12:n,l=i;for(;l<=d;l++){var h={start:l,end:l+1},c="";c+=l>12&&!o?l.toString()+":00"+(o?"PM":""):l>12?(l-12).toString()+":00"+(o?"PM":""):12==l?l.toString()+":00"+(o?"PM":""):l.toString()+":00"+(o?"AM":""),t.push(c),s.push(h)}return{str:t,det:s}}(s.hours);s.hoursParsed=a.str,s.hoursDetail=a.det;var r,n,o,i,d,l,h=!1,c=!1,u=s.days,g=s.hoursParsed,p=this;if("string"==typeof t)switch(t){case"getSelectedHour":return function(){for(var t=e(".day"),s={},a=0;a<t.length;a++){for(var r=e(t[a]).children(),n=[],o=0;o<r.length;o++)e(r[o]).hasClass("selected")&&n.push(r[o]);s[a]=n}return s}();case"getSelectedHourData":return function(){for(var t=e(".day"),a={},r=0;r<t.length;r++){for(var n=e(t[r]).children(),o={},i=0;i<n.length;i++)o[i]=e(n[i]).hasClass("selected");a[r]=o}return"json"==s.dataOutput?JSON.stringify(a):a}();case"dump":return function(){for(var t=e(".day"),s="",a=0;a<t.length;a++)for(var r=e(t[a]).data("day"),n=e(t[a]).children(),o=!1,i=[],d=0;d<n.length;d++){var l=e(n[d]),h=e(l).hasClass("selected"),c=e(l).next();e(c).hasClass("selected"),0==c.length&&h?(o=!1,i.push(e(l)),s+=r+" "+e(i[0]).data("start")+" start, "+r+" "+e(i[i.length-1]).data("end")+" end, ",i=[]):!o&&h?(o=!0,i.push(e(l))):o&&h?i.push(e(l)):o&&!h&&(o=!1,s+=r+" "+e(i[0]).data("start")+" start, "+r+" "+e(i[i.length-1]).data("end")+" end, ",i=[])}return s}();default:throw"Weekly schedule method unrecognized!"}else{var v=s.hoursDetail,f=s.triggerMethod;e(p).addClass("schedule");var m=e("<div></div>",{class:"header"}),C=e("<div></div>",{class:"align-block"});m.append(C);for(var y=0;y<u.length;++y){var x=e("<div></div>",{class:"header-item "+u[y]+"-header"}),k=e("<h3>"+((l=u[y]).charAt(0).toUpperCase()+l.slice(1))+"</h3>");x.append(k),m.append(x)}var b=e("<div></div>",{class:"days-wrapper"}),w=e("<div></div>",{class:"hour-header"});b.append(w);for(y=0;y<g.length;y++){var S=e("<div></div>",{class:"hour-header-item "+g[y]});k=e("<h5>"+g[y]+"</h5>");S.append(k),w.append(S)}for(y=0;y<u.length;y++){var M=e("<div></div>",{class:"day "+u[y]});e(M).data("day",u[y]);for(var P=0;P<g.length;P++){var A="";try{s.data[y][P]&&(A=" selected")}catch(e){}var D=e("<div></div>",{class:"hour "+g[P]+A});e(D).data("start",v[P].start),e(D).data("end",v[P].end),M.append(D)}b.append(M)}switch(e(p).append(m),e(p).append(b),e(".schedule").css({width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}),e(".header").css({height:"30px",width:"100%",background:s.headerBackgroundColor,marginBottom:"5px",display:"flex",flexDirection:"row"}),e(".align-block").css({width:"100%",height:"100%",background:s.headerBackgroundColor,margin:"3px"}),e(".header-item").css({width:"100%",height:"100%",margin:"2px"}),e(".header-item h3").css({margin:0,textAlign:"center",verticalAlign:"middle",position:"relative",top:"50%",color:s.fontColor,fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight,transform:"translateY(-50%)",userSelect:"none"}),e(".hour-header").css({display:"flex",flexDirection:"column",margin:"2px",marginRight:"1px",background:s.headerBackgroundColor,width:"100%"}),e(".days-wrapper").css({width:"100%",height:"100%",background:"transparent",display:"flex",flexDirection:"row",justifyContent:"flex-start",position:"relative"}),e(".hour-header-item").css({width:"100%",height:"100%",border:"none",borderColor:"none",borderStyle:"none"}),e(".hour-header-item h5").css({color:s.fontColor,margin:"0",textAlign:"right",verticalAlign:"middle",position:"relative",fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight,paddingRight:"10%",userSelect:"none"}),e(".day").css({display:"flex",flexDirection:"column",marginRight:"1px",marginBottom:"1px",background:"transparent",width:"100%"}),e(".hour").css({background:"#dddddd",marginBottom:"1px",width:"100%",height:"100%",userSelect:"none"}),e("<style type='text/css' scoped> .schedule .hour.hover { background: "+s.hoverColor+" !important;} .schedule .hour.selected { background: "+s.selectionColor+" !important; } .schedule .hour.disabled { pointer-events: none !important; opacity: 0.3 !important; box-shadow: none !important; }</style>").appendTo(p),e(".schedule").on("contextmenu",function(){return!1}),f){case"click-and-drag":e(".hour").on("mouseenter",function(){h?c?e(this).removeClass("selected"):e(this).addClass("selected"):e(this).addClass("hover")}).on("mousedown",function(){h=!0,B(e(this).parent(),!0),e(this).hasClass("selected")?(e(this).removeClass("selected").trigger("selectionremoved"),c=!0):e(this).addClass("selected").trigger("selectionmade"),e(this).removeClass("hover")}).on("mouseup",function(){c=!1,h=!1,z()}).on("mouseleave",function(){h||e(this).removeClass("hover")});break;case"click-hover-and-click":e(".hour").on("click",function(){h?(c?e(this).removeClass("selected"):e(this).addClass("selected"),z(),h=!1,c=!1):(h=!0,B(e(this).parent(),!0),e(this).hasClass("selected")?(e(this).removeClass("selected").trigger("selectionremoved"),c=!0):e(this).addClass("selected").trigger("selectionmade")),e(this).removeClass("hover")}).on("mouseenter",function(){h?c?e(this).removeClass("selected"):e(this).addClass("selected"):e(this).addClass("hover")}).on("mouseleave",function(){e(this).removeClass("hover")});break;case"click-click":i=!1,d=!1,e(".hour").on("click",function(){if(i||d){if(e(this).parent()[0]==o[0]){n=e(this);var t=e(o).children(),s=!1,a=e(r).data("start"),l=e(this).data("start");l<a&&(n=r,r=e(this));for(var h=0;h<t.length;h++)t[h]==r[0]&&(s=!0),s&&(i?e(t[h]).addClass("selected"):d&&e(t[h]).removeClass("selected")),t[h]==n[0]&&(s=!1),z()}r=null,o=null,i=!1,d=!1}else B(e(this).parent(),!1),e(this).hasClass("selected")?(i=!1,d=!0,r=e(this),o=e(this).parent()):(i=!0,removeClass=!1,r=e(this),o=e(this).parent())}).on("mouseenter",function(){e(this).addClass("hover")}).on("mouseleave",function(){e(this).removeClass("hover")})}}function B(t,s){for(var a=e(t).attr("class").split(" ")[1],r=e(".day"),n=0;n<r.length;n++)if(!e(r[n]).hasClass(a))for(var o=e(r[n]).children(),i=0;i<o.length;i++)e(o[i]).addClass("disabled");s&&e(t).on("mouseleave",function(){z(),h=!1,c=!1})}function z(){for(var t=e(".day"),s=0;s<t.length;s++)for(var a=e(t[s]).children(),r=0;r<a.length;r++)e(a[r]).removeClass("disabled")}}}(jQuery);